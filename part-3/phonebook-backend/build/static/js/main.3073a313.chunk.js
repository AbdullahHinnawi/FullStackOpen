(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),o=t(15),a=t.n(o),i=(t(20),t(6)),u=t(3),s=t(0),d=function(e){var n=e.filter,t=e.handleFilterChange;return Object(s.jsxs)("div",{children:["Filter shown with",Object(s.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.person,t=e.handleDelete;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("p",{children:[n.name," ",n.number,Object(s.jsx)("button",{onClick:function(){return t(n)},style:{marginLeft:10},children:"Delete"})]},n.id)})},b=function(e){var n=e.persons,t=e.filter,r=e.handleDelete;return Object(s.jsx)("div",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(s.jsx)(l,{person:e,handleDelete:r},e.id)}))})},h=function(e){var n=e.newName,t=e.handleNewNameChange,r=e.newNumber,c=e.handleNewNumberChange,o=e.handleSubmit;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:o,children:[Object(s.jsxs)("div",{children:["Name: ",Object(s.jsx)("input",{value:n,onChange:t})]}),Object(s.jsxs)("div",{children:["Number: ",Object(s.jsx)("input",{value:r,onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})})},j=t(4),f=t.n(j),m="/api/persons",O={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))}},p={color:"green",border:"1px solid green",background:"#DEF1DD",borderRadius:5,marginBottom:16,padding:10,width:600},g={color:"#731C23",border:"1px solid #731C23",background:"#F8D7D9",borderRadius:5,marginBottom:16,padding:10,width:600},x=function(e){var n=e.message,t=e.success;return null===n?null:Object(s.jsx)("div",{style:t?p:g,children:n})},v=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),a=Object(u.a)(o,2),l=a[0],j=a[1],f=Object(r.useState)(""),m=Object(u.a)(f,2),p=m[0],g=m[1],v=Object(r.useState)(""),w=Object(u.a)(v,2),C=w[0],N=w[1],D=Object(r.useState)(null),k=Object(u.a)(D,2),S=k[0],y=k[1],F=Object(r.useState)(!1),L=Object(u.a)(F,2),A=L[0],P=L[1];Object(r.useEffect)((function(){O.getAll().then((function(e){return c(e)}))}),[]);return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(x,{message:S,success:A}),Object(s.jsx)(d,{filter:l,handleFilterChange:function(e){j(e.target.value)}}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsx)(h,{newName:p,handleNewNameChange:function(e){g(e.target.value)},newNumber:C,handleNewNumberChange:function(e){N(e.target.value)},handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===p.toLowerCase()}));if(n){window.confirm("".concat(p," is already added to phonebook, replace the old number with a new one?"))&&O.update(n.id,Object(i.a)(Object(i.a)({},n),{},{number:C})).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),g(""),N(""),y("".concat(n.name," phone number updated successfully!")),P(!0),setTimeout((function(){y(null),P(!1)}),5e3)})).catch((function(e){console.log(e.response),404===e.response.status&&y("Information of ".concat(n.name," has already been removed from the server")),y(e.response.data.error),setTimeout((function(){y(null)}),5e3)}))}else{var r={id:t[t.length-1].id+1,name:p,number:C};O.create(r).then((function(e){c(t.concat(e)),g(""),N(""),y("".concat(p," added successfully!")),P(!0),setTimeout((function(){y(null),P(!1)}),5e3)})).catch((function(e){console.log(e.response.data),y(e.response.data.error)}))}}}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(b,{persons:t,filter:l,handleDelete:function(e){window.confirm("Would you like to delete ".concat(e.name,"?"))&&O.deletePerson(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id})))})).catch((function(n){console.log("error",n),alert("Person with id ".concat(e.id," not found!"))}))}})]})};a.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(v,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3073a313.chunk.js.map